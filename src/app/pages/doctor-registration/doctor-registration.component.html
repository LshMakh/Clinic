<div class="registration">
    <h2 class="header">რეგისტრაცია</h2>
    <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
        <div class="row1">
            <div class="input-container">
                <div class="input">
                    <label for="firstName">სახელი</label>
                    <input type="text" id="firstName" formControlName="firstName" placeholder="(მინიმუმ 2 სიმბოლო)">
                    <div *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched" 
                         class="error-message">
                        სახელის ველის შევსება აუცილებელია
                    </div>
                </div>
            </div>
            <div class="input-container">
                <div class="input">
                    <label for="email">Email</label>
                    <div class="input-wrapper">
                        <input 
                          type="email" 
                          id="email" 
                          formControlName="email"
                          [class.is-pending]="email?.pending"
                          [class.is-invalid]="email?.errors && email?.touched"
                        >
                        <div class="spinner" *ngIf="email?.pending">
                          <!-- Add your loading spinner here -->
                        </div>
                      </div>
                      
                      <div class="error-messages">
                        <div *ngIf="email?.errors?.['required'] && email?.touched" 
                             class="error-message">
                          Email is required
                        </div>
                        <div *ngIf="email?.errors?.['email'] && email?.touched" 
                             class="error-message">
                          Please enter a valid email address
                        </div>
                        <div *ngIf="email?.errors?.['emailExists']" 
                             class="error-message">
                          This email is already in use
                        </div>
                      </div>
                </div>
            </div>
            <div class="input-container">
                <div class="input">
                    <label for="personalNumber">პირადი ნომერი</label>
                    <input type="text" id="personalNumber" formControlName="personalNumber" placeholder="00000000000">
                    <div *ngIf="registerForm.get('personalNumber')?.invalid && registerForm.get('personalNumber')?.touched" 
                         class="error-message">
                        პირადი ნომრის ველის შევსება აუცილებელია
                    </div>
                </div>
            </div>
        </div>
        <div class="row2">
            <div class="input-container">
                <div class="input">
                    <label for="lastName">გვარი</label>
                    <input type="text" id="lastName" formControlName="lastName">
                    <div *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched" 
                         class="error-message">
                        გვარის ველის შევსება აუცილებელია
                    </div>
                </div>
            </div>
            <div class="input-container">
                <div class="input">
                    <label for="specialty">სპეციალობა</label>
                    <input type="text" id="specialty" formControlName="specialty" 
                           placeholder="შეიყვანეთ სპეციალობა">
                    <div *ngIf="registerForm.get('specialty')?.invalid && registerForm.get('specialty')?.touched" 
                         class="error-message">
                        სპეციალობის ველის შევსება აუცილებელია
                    </div>
                </div>
            </div>
            <div class="input-container">
                <div class="input">
                    <label for="password">პაროლი</label>
                    <input type="password" id="password" formControlName="password" placeholder="(მინიმუმ 8 სიმბოლო)">
                    <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" 
                         class="error-message">
                        პაროლის ველის შევსება აუცილებელია
                    </div>
                </div>
            </div>
        </div>
        <div class="row3">
            <div class="input-container">
                <div class="input">
                    <label for="photoUrl">ფოტოს URL</label>
                    <input type="text" id="photoUrl" formControlName="photoUrl">
                </div>
            </div>
        
            <div class="input-container">
                <div class="input">
                    <label for="cvUrl">CV URL</label>
                    <input type="text" id="cvUrl" formControlName="cvUrl">
                </div>
            </div>
        </div>
        <button type="submit" class="btn" [disabled]="!registerForm.valid || isSubmitting">
            {{ isSubmitting ? 'მიმდინარეობს...' : 'რეგისტრაცია' }}
        </button>
    </form>
</div>